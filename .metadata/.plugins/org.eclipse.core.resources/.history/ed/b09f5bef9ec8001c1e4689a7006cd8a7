package atlasweb.dao;

import java.util.HashSet;
import java.util.Set;

import org.hibernate.Session;
import org.hibernate.Transaction;

import atlasweb.conf.HibernateUtil;
import atlasweb.model.Bracelet;
import atlasweb.model.Jeux;
import atlasweb.model.Utilisateur;
import atlasweb.service.SendSmsBasic;

public class BraceletDao {
	
	public void saveBracelet(Bracelet bracelet) {
        Transaction transaction = null;
        try {
        	Session session = HibernateUtil.getSessionFactory().openSession();
            transaction = session.beginTransaction();            
            session.save(bracelet);
            transaction.commit();
            SendSmsBasic sms = new SendSmsBasic();
            sms.sendSMS(bracelet.getUriliUtilisateur().getPhoneNumber(),bracelet.getPrix());
        } catch (Exception e) {
            if (transaction != null) {
                transaction.rollback();
            }
            e.printStackTrace();
        }
    }
	public void x() {

Set<Jeux> howToProgramWithJavaAuthor = new HashSet<Jeux>();
Set<Jeux> howToProgramWithJava2ndAuthors = new HashSet<Jeux>();
Set<Jeux> howToPlayGuitarAuthor = new HashSet<Jeux>();

Jeux jeux = new Jeux();
jeux.setName("xx");
howToProgramWithJavaAuthor.add(jeux);

Bracelet bracelet = new Bracelet();
book.setBookName("How to Program with Java");

Book book2 = new Book();
book2.setBookName("How to Program with Java 2nd Edition");

Book book3 = new Book();
book3.setBookName("How to Play Guitar");

book.setAuthors(howToProgramWithJavaAuthor);
book2.setAuthors(howToProgramWithJava2ndAuthors);
book3.setAuthors(howToPlayGuitarAuthor);

dao.save(book);
dao.save(book2);
dao.save(book3);
	}
}

